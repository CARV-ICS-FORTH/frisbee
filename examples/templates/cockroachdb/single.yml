---
apiVersion: frisbee.io/v1alpha1
kind: Template
metadata:
  name: cockroachdb
spec:
  entries:
    "master":
      spec: |
        agents:
          telemetry: [ sysmon/container ]
        container:
          name: app
          image: cockroachdb/cockroach:latest
          ports:
            - name: to-clients
              containerPort: 26257
            - name: to-console
              containerPort: 8080
          command:
            - /bin/sh   # Run shell
            - -c        # Read from string
            - |         # Multi-line str
              set -eum
              trap "touch /dev/shm/stop" EXIT

              echo "Start Cockroachdb"
              cockroach start-single-node                   \
                  --insecure                                \
                  --store=$${HOSTNAME}                      \
                  --listen-addr=$${HOSTNAME}:26257          \
                  --http-addr=$${HOSTNAME}:8080             \