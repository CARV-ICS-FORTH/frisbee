#---
  #apiVersion: v1
  #kind: ServiceAccount
  #metadata:
  #  name: {{.Values.operator.name}}-account


---
# Glue between the rbac role and the Frisbee deployment's Account.
# If the operator runs internal to the cluster, use the Frisbee account.
# If the operator runs externally to the cluster, use the default account
# This is because accounting requires mounting a token to the pod, which is not feasible
# for externally running controllers.
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: frisbee
  namespace: {{.Release.Namespace}}
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: frisbee # This is fixed because it is autogenerated in the Makefile
subjects:
  - kind: ServiceAccount
    name: default
    namespace: {{.Release.Namespace}}
  #    {{if .Values.operator.enabled}}
  #    name: {{.Values.operator.name}}-account
  #    {{ else }}
  #    name: default
  #    {{ end }}