---
apiVersion: frisbee.io/v1alpha1
kind: Template
metadata:
  name: fault.volume.io.delay
  labels:
    app.kubernetes.io/managed-by: {{.Release.Service | quote}}
    app.frisbee.io/component: faultload
  annotations:
    faultload.frisbee.io/apply-to: core/v1/volumes
spec:
  inputs:
    parameters:
      memory: ""
      cpu: ""
  fault:
    apiVersion: chaos-mesh.org/v1alpha1
    kind: IOChaos
    spec:
      action: latency
      mode: one
      selector:
        labelSelectors:
          app: etcd
      volumePath: /var/run/etcd
      path: /var/run/etcd/**/*
      delay: "10ms"
      percent: 10
      duration: "400s"