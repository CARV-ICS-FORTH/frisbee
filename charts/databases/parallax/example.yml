---
apiVersion: frisbee.dev/v1alpha1
kind: Scenario
metadata:
  name: parallax
spec:
  actions:
    - action: Cluster
      name: sequential-benchmarks
      cluster:
        templateRef: parallax.ycsb
        schedule:
          sequential: true
        tolerate:
          failedJobs: 35 # number of expected tests that fail
        inputs:
          - { test: test_small, volumeSize: 10Gi }
          - { test: test_medium, volumeSize: 10Gi }
          - { test: test_large, volumeSize: 10Gi }
          - { test: test_smalld, volumeSize: 10Gi }
          - { test: test_mediumd, volumeSize: 10Gi }
          - { test: test_larged, volumeSize: 10Gi }
          - { test: test_index_node, volumeSize: 10Gi }
          - { test: test_dirty_scans_sd_greater, volumeSize: 10Gi }
          - { test: test_dirty_scans_small, volumeSize: 10Gi }
          - { test: test_dirty_scans_medium, volumeSize: 10Gi }
          - { test: test_dirty_scans_large, volumeSize: 10Gi }
          - { test: test_dirty_scans_smalld, volumeSize: 10Gi }
          - { test: test_dirty_scans_mediumd, volumeSize: 10Gi }
          - { test: test_dirty_scans_larged, volumeSize: 10Gi }
          - { test: test_dirty_scans_smallp, volumeSize: 10Gi }
          - { test: test_dirty_scans_mediump, volumeSize: 10Gi }
          - { test: test_dirty_scans_largep, volumeSize: 10Gi }
          - { test: test_dirty_scans_smalldp, volumeSize: 10Gi }
          - { test: test_dirty_scans_mediumdp, volumeSize: 10Gi }
          - { test: test_dirty_scans_largedp, volumeSize: 10Gi }
          - { test: test_options, volumeSize: 10Gi }
          - { test: test_categories, volumeSize: 10Gi }
          - { test: test_sanitizers, volumeSize: 10Gi }
          - { test: test_gc, volumeSize: 10Gi }
          - { test: test_medium, volumeSize: 10Gi }
          - { test: test_mixes_99_small_1_medium, volumeSize: 10Gi }
          - { test: test_mixes_45_small_50_medium_5_big, volumeSize: 10Gi }
          - { test: simple_test_delete, volumeSize: 10Gi }
          - { test: test_leaf_root_delete_get_scan, volumeSize: 10Gi }
          - { test: test_region_allocations, volumeSize: 10Gi }
          - { test: test_redo_undo_log, volumeSize: 10Gi }
          - { test: test_optional_logging, volumeSize: 10Gi }
          - { test: test_par_format, volumeSize: 10Gi }
          - { test: test_par_put_serialized, volumeSize: 10Gi }
          - { test: test_par_put_metadata, volumeSize: 10Gi }
          - { test: tracer, volumeSize: 10Gi}

  # Teardown
    - action: Delete
      name: teardown
      depends: { success: [ sequential-benchmarks ] }
      delete:
        jobs: []
